<!-- Lists Grid -->
<div class="container">
  <div class="row justify-content-center g-4">

    <% @lists.each do |list| %>
      <% random_movie = Movie.all.sample %>

      <div class="col-12 col-md-6 col-lg-3" style="margin-top:50px">
        <div class="card bg-dark text-light shadow-lg border-0 rounded-3 list-card h-100 overflow-hidden position-relative">

          <!-- Edit Button (top-left corner) -->
          <%= link_to edit_list_path(list),
                      class: "btn btn-sm btn-dark position-absolute top-0 start-0 d-flex align-items-center justify-content-center shadow",
                      style: "width: 30px; height: 30px;" do %>
            <i class="fa-solid fa-pen text-secondary fs-6"></i>
          <% end %>

          <!-- Delete Button (top-right corner) -->
          <%= link_to list_path(list),
                      data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this list?" },
                      class: "btn btn-sm btn-dark position-absolute top-0 end-0 d-flex align-items-center justify-content-center shadow",
                      style: "width: 30px; height: 30px;" do %>
            <i class="fa-solid fa-xmark text-secondary fs-6"></i>
          <% end %>

          <!-- Card Header -->
          <div class="card-body d-flex flex-column justify-content-between bg-dark p-3 flex-grow-1">
            <h4 class="fw-bold text-center mb-3"><%= list.name %></h4>
          </div>

          <!-- Movie Poster -->
          <% if list.photo.attached? %>
            <%= cl_image_tag list.photo.key,
                             class: "object-fit-cover w-100",
                             style: "height: 220px; object-position: top;" %>
          <% else %>
            <img src="<%= random_movie.poster_url %>"
                 alt="<%= random_movie.title %>"
                 class="object-fit-cover w-100"
                 style="height: 220px; object-position: top;">
          <% end %>

          <!-- Full-width Button -->
          <%= link_to "Show Movies â†’", list_path(list),
                      class: "btn btn-dark fw-bold w-100 rounded-0 border-0 py-2" %>
        </div>
      </div>
    <% end %>

  </div>
</div>
