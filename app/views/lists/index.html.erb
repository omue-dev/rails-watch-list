<%= render "add_list_modal" %>

<!-- Header -->
<div class="text-center mb-5">
  <h1 class="fw-bold text-light display-5">Choose Your List</h1>
  <hr class="w-25 mx-auto border-danger opacity-75">
  <!-- Modal-Trigger -->
  <button type="button"
          class="btn btn-danger text-dark fw-bold rounded-0 border-1 border-dark py-2"
          data-bs-toggle="modal"
          data-bs-target="#addListModal">
    Add New List
  </button>
</div>

<!-- Lists Grid -->
<div class="container">
  <div class="row justify-content-center g-4">

    <% @lists.each do |list| %>
      <!-- Picks a random movie from the database to display (used for preview images on each list card) -->
      <% random_movie = Movie.all.sample %>

      <div class="col-12 col-md-6 col-lg-4">
        <div class="card bg-dark text-light shadow-lg border-0 rounded-3 list-card h-100 overflow-hidden">

          <!-- Movie Poster top -->
          <% if random_movie&.poster_url.present? %>
            <img src="<%= random_movie.poster_url %>"
                 alt="<%= random_movie.title %>"
                 class="object-fit-cover w-100"
                 style="height: 220px; object-position: top;">
          <% else %>
            <div class="bg-secondary d-flex align-items-center justify-content-center" style="height: 220px;">
              <i class="bi bi-film fs-1 text-muted"></i>
            </div>
          <% end %>

          <!-- Card Body bottom -->
          <div class="card-body d-flex flex-column justify-content-between bg-dark p-3 flex-grow-1">
            <h4 class="fw-bold text-center mb-3"><%= list.name %></h4>
          </div>

          <!-- Full-width Button -->
          <%= link_to "Open List â†’", list_path(list),
                      class: "btn btn-danger fw-bold w-100 rounded-0 border-0 py-2" %>
        </div>
      </div>
    <% end %>
